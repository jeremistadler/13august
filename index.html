<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>The wedding of Johanna &amp; Jeremi</title>

  <meta name="description" content="The wedding save the date of Johanna &amp; Jeremi">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="shortcut icon" type="image/png" href="apple-touch-icon.png"/>

  <style>
    body, html, p{
      font-family: 'Dancing Script', system, -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Lucida Grande", cursive;

      margin: 0;
      padding: 0;
    }

    #bg {
      width: 100%;
    }


    @media only screen and (min-width : 600px) {
      #bg {
        width: auto;
        height: 900px;
        margin: auto;
        display: block;
        margin-top: 50px;
      }
    }

    #seed-container {
      position: absolute;
      left: 40%;
      top: 75%;
    }

    @media only screen and (min-width : 600px) {
      #bg {
        width: auto;
        height: 900px;
        margin: auto;
        display: block;
        margin-top: 50px;
      }
    }

    @keyframes abc {
      from {
        transform: translate(0px, 0px) scale(0) rotate(0deg) ;
        opacity: 0;
      }
      30% {
        opacity: 1;
      }
      70% {
        opacity: 1;
      }
      to {
        opacity: 0;
        transform: translate(100px, 20px) scale(1) rotate(20deg);
      }
    }

    .seed {
      position: absolute;
      top: 75%;
      left: 40%;
      opacity: 0;
    }

  </style>

  <link href='https://fonts.googleapis.com/css?family=Dancing+Script:400,700' rel='stylesheet' type='text/css'>
</head>
<body>
  <img id="bg" src="bg.jpg" />

  <svg class="seed" width="22px" height="36px" viewBox="167 398 22 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <path d="M179.760006,424.918569 C179.760006,426.013114 180.005563,427.576685 180.598093,429.637445 C181.190624,431.698206 182.260201,433.191608 182.260201,433.191608 C182.260201,433.191608 182.808326,431.486824 183.017744,429.171905 C183.227161,426.856986 182.992465,426.211476 182.260202,424.062327 C181.527938,421.913177 180.989814,420.840501 180.989814,420.840501 L178.043793,399.584239 L188.219335,398.003289 C188.219335,398.003289 183.335071,397.924021 177.881478,398.543799 C172.427884,399.163576 167,400.414776 167,400.414776 L177.24703,399.584239 L180.226317,420.840502 C180.226317,420.840502 179.760006,423.824023 179.760006,424.918569 Z" fill="#FFFFFF"></path>
  </svg>

  <div id="seed-container"></div>

  <div>
    <p style="text-align: center; padding: 30px; font-size: 30px;">Info</p>
    <p style="text-align: center; padding: 30px; font-size: 20px;">Test test test test test</p>

    <p style="text-align: center; color: #777; padding: 10px; font-size: 13px;">Skapad med &#9825; av Johanna och Jeremi</p>

  </div>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-34450351-2', 'auto');
    ga('send', 'pageview');
  </script>

  <script>

  var seedContainer = document.getElementById('seed-container');
  var svgElm = document.getElementsByClassName('seed')[0];

  bezier = function(t, p0, p1, p2, p3){
    var cX = 3 * (p1 - p0),
        bX = 3 * (p2 - p1) - cX,
        aX = p3 - p0 - cX - bX;

    return (aX * Math.pow(t, 3)) + (bX * Math.pow(t, 2)) + (cX * t) + p0;
  }

  var seeds = [];

  setInterval(() => {
    var newElm = svgElm.cloneNode(true);
    seedContainer.appendChild(newElm);

    var time = performance.now();

    seeds.push({
      bornAt: time,
      diesAt: time + 1000 * 5,
      elm: newElm,
      startX: Math.random() * 10,
      startY: Math.random() * 10,
      endX: (Math.random() - 0.5) * 100 + 100,
      endY: (Math.random() - 0.5) * 100 + 10,
    })
  }, 400);

  function update(timestamp) {
    for (var i = 0; i < seeds.length; i++) {
      var seed = seeds[i];

      if (seed.diesAt < timestamp) {
        seed.elm.parentElement.removeChild(seed.elm);
        seeds.splice(i, 1);
        i--;
        continue;
      }

      var h = (timestamp - seed.bornAt) / (seed.diesAt - seed.bornAt);
      var x = seed.startX + seed.endX * h;
      var y = seed.startY + seed.endY * h;

      seed.elm.style.opacity = bezier(h, 0, 1, 1, 0);
      seed.elm.style.transform = 'translate(' + x + 'px,' + y + 'px)'
    }

    window.requestAnimationFrame(update);
  }

  window.requestAnimationFrame(update);

  </script>
</body>
</html>
